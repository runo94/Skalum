document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".cases-block").forEach(e=>{const t=e.querySelector(".cases-block__slider");if(!t)return;const n=Array.from(t.querySelectorAll(".case-slide"));if(!n.length)return;const i=n[0].querySelectorAll(".case-item"),l=Math.min(n.length,i.length);if(!l)return;let r=0,s=null,c=null,o=null,a=null;const d=()=>{o&&a&&o.removeEventListener("transitionend",a),o=null,a=null},u=()=>{t.querySelectorAll(".case-item__timer-fill").forEach(e=>{e.style.transition="none",e.style.width="0%",e.offsetHeight,e.style.transition=""})},m=e=>{const t=n[e],i=t?.querySelector(`.case-item[data-index="${e}"] .case-item__timer-fill`);i&&(clearTimeout(s),d(),i.style.transition="none",i.style.width="0%",i.offsetHeight,i.style.transition="width 50000ms linear",a=e=>{y()},i.addEventListener("transitionend",a),o=i,s=setTimeout(y,50120),c&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{i.style.width="100%"}))},h=e=>{r=e,n.forEach((t,n)=>t.classList.toggle("active",n===e)),t.querySelectorAll(".case-item").forEach(t=>{t.classList.toggle("active",Number(t.dataset.index||-1)===e)}),u(),m(e)},y=()=>h((r+1)%l);t.querySelectorAll(".case-item").forEach(e=>{e.addEventListener("click",()=>{const t=Number(e.dataset.index||0);h(t)})});const f=()=>{clearTimeout(s),d()};document.addEventListener("visibilitychange",()=>{document.hidden?f():m(r)}),h(0),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(f(),u())})});