document.querySelector(".animation-block__inner .ssp-card")&&document.querySelectorAll(".animation-block__inner").forEach(t=>{if(!t.querySelector(".gc-group"))return;const e=t.querySelector(".gc-group"),s=e.querySelector(".gc"),i=s.querySelector(".gc-needle"),a=s.querySelector(".gc-track"),o=s.querySelector(".gc-value"),r=getComputedStyle(s),n=parseFloat(r.getPropertyValue("--gc-cx"))||110,l=parseFloat(r.getPropertyValue("--gc-cy"))||125,h=parseFloat(r.getPropertyValue("--gc-r"))||102,c=parseFloat(r.getPropertyValue("--gc-theta0"))||0;a&&(a.setAttribute("cx",n),a.setAttribute("cy",l),a.setAttribute("r",h));const d=t=>{const e=t+c;i.setAttribute("transform",`translate(${n} ${l}) rotate(${e}) translate(0 ${-h})`)};gsap.set(s,{"--gc-start":"180deg","--gc-open":"0deg"});const g={angle:0};d(g.angle);const u={v:27};o.textContent=`${u.v}`;const y=gsap.timeline();y.to(s,{"--gc-open":"360deg",duration:.9,ease:"power3.out"},0).to(g,{angle:123,duration:.94,ease:"power3.out",onUpdate:()=>d(g.angle)},0).to(u,{v:49,duration:.9,ease:"power3.out",onUpdate:()=>o.textContent=`${Math.round(u.v)}`},0);const p=e.querySelector(".gc-bars"),m=gsap.timeline();p.querySelectorAll(".gc-bar").forEach(t=>{const e=t.querySelector(".gc-bar-fill--base"),s=t.querySelector(".gc-bar-fill--hover"),i=+t.dataset.from||0,a=+t.dataset.to||100;gsap.set(e,{height:i+"%"}),gsap.set(s,{height:i+"%",opacity:0}),m.to(e,{height:a+"%",duration:.9,ease:"power3.out"},0).to(s,{height:a+"%",opacity:1,duration:.9,ease:"power3.out"},0)});const f=gsap.timeline(),x=t.querySelector(".ssp-delta-val"),w={v:12};x.textContent=w.v,f.to(w,{v:49,duration:.9,ease:"power3.out",onUpdate:()=>x.textContent=Math.round(w.v)},0),t.querySelectorAll(".ssp-dot").forEach(t=>{const e=t.querySelector(".ssp-dot-base"),s=t.querySelector(".ssp-dot-hover");gsap.set(s,{opacity:0}),f.to(s,{opacity:1,duration:.9,ease:"power3.out"},0),f.to(e,{opacity:0,duration:.9,ease:"power3.out"},0)}),t.querySelectorAll(".ssp-metric").forEach(t=>{const e=+t.dataset.from||0,s=+t.dataset.to||0,i={v:e};t.textContent=e,f.to(i,{v:s,duration:.9,ease:"power3.out",onUpdate:()=>t.textContent=Math.round(i.v)},0)});const v=gsap.timeline({paused:!0});v.add(y,0).add(m,0).add(f,0),t.addEventListener("mouseenter",()=>v.play()),t.addEventListener("mouseleave",()=>v.reverse()),t.addEventListener("click",()=>v.reversed()?v.play():v.reverse())}),(()=>{if(!document.querySelector(".animation-block__inner .google_list_card"))return;console.log("work");const t=document.getElementById("c"),e=t.getContext("2d"),s=window.devicePixelRatio||1;if(!t)return;const i=t.closest(".animation-block__inner")||t,a=window.SkalumAnimatedBlock&&window.SkalumAnimatedBlock.imgBase||"/wp-content/themes/skalum/blocks/animation-block/assets/images/",o=new Image,r=new Image,n=new Image;o.src=a+"bg.png",r.src=a+"main_item.png",n.src=a+"group.png";const l={x:28,yRest:260,yHover:130},h={x:28,yRest:130,yHover:210};let c=1,d=1,g=0,u=0;function y(){const e=t.clientWidth||t.width,i=t.clientHeight||t.height;t.width=e*s,t.height=i*s,c=t.width/o.naturalWidth,d=t.height/o.naturalHeight}function p(){e.clearRect(0,0,t.width,t.height),e.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,t.width,t.height),g+=.12*(u-g);const s=(i=g,1-Math.pow(1-i,1));var i;const a=l.yRest+(l.yHover-l.yRest)*s,y=h.yRest+(h.yHover-h.yRest)*s;e.drawImage(r,l.x*c,a*d,r.naturalWidth*c,r.naturalHeight*d),e.drawImage(n,h.x*c,y*d,n.naturalWidth*c,n.naturalHeight*d),requestAnimationFrame(p)}i.addEventListener("mouseenter",()=>u=1),i.addEventListener("mouseleave",()=>u=0),window.addEventListener("resize",y);let m=0;[o,r,n].forEach(t=>t.onload=()=>{m++,3===m&&(y(),p())})})(),(()=>{const t=window.SkalumAnimatedBlock&&window.SkalumAnimatedBlock.imgBase||"/wp-content/themes/skalum/blocks/animation-block/assets/images/",e=[{day:"Day 1",sales:300,spend:200,roi:28},{day:"Day 2",sales:320,spend:250,roi:36},{day:"Day 3",sales:350,spend:270,roi:23},{day:"Day 4",sales:400,spend:280,roi:70},{day:"Day 5",sales:500,spend:300,roi:90},{day:"Day 6",sales:650,spend:320,roi:120},{day:"Day 7",sales:700,spend:350,roi:130},{day:"Day 8",sales:750,spend:300,roi:150},{day:"Day 9",sales:850,spend:320,roi:180},{day:"Day 10",sales:900,spend:350,roi:190}];new class{constructor(e,s={}){this.cvs="string"==typeof e?document.querySelector(e):e,this.ctx=this.cvs.getContext("2d"),this.CARD={x:110,y:30,w:290,h:340,r:8},this.HEADER_H=50,this.ROW_H=40,this.RIBBON={y:this.CARD.y+this.HEADER_H+3.5*this.ROW_H-this.ROW_H/2,startX:52,endX:30,label:"skalum"},this.DURATION=900,this.t=0,this.t0=0,this.dir=0,this.tStart=0,this.raf=0,this.block=this.cvs.closest(".animation-block__inner")||this.cvs,this._fitDPR(),window.addEventListener("resize",()=>{this._fitDPR(),this.renderScene(this.t)}),this.block.addEventListener("mouseenter",()=>this.toB()),this.block.addEventListener("mouseleave",()=>this.toA()),this.icons={},this._loadIcons({shopify:t+"/shopy.svg",ads:t+"/google_ads.svg"}).then(()=>this.renderScene(0)),this.renderScene(0)}_loadIcons(t){const e=Object.entries(t).map(([t,e])=>new Promise(s=>{const i=new Image;i.onload=()=>{this.icons[t]=i,s()},i.src=e}));return Promise.all(e)}_fitDPR(){const t=Math.max(1,window.devicePixelRatio||1),e=this.cvs.getBoundingClientRect();e.width&&e.height?(this.cvs.width=Math.round(e.width*t),this.cvs.height=Math.round(e.height*t)):(this.cvs.width=Math.round(this.cvs.width*t),this.cvs.height=Math.round(this.cvs.height*t)),this.ctx.setTransform(t,0,0,t,0,0)}ease(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}lerp(t,e,s){return t+(e-t)*s}roiColor(t){const e=Math.max(0,Math.min(130,t))/130;return`rgb(${Math.round(255*(1-e))},${Math.round(30+180*e)},${Math.round(30+30*e)})`}roundTopRectPath(t,e,s,i,a){const o=Math.min(a,s/2),r=this.ctx;r.beginPath(),r.moveTo(t,e+i),r.lineTo(t,e+o),r.quadraticCurveTo(t,e,t+o,e),r.lineTo(t+s-o,e),r.quadraticCurveTo(t+s,e,t+s,e+o),r.lineTo(t+s,e+i),r.closePath()}roundRectPath(t,e,s,i,a){const o=Math.min(a,s/2,i/2),r=this.ctx;r.beginPath(),r.moveTo(t+o,e),r.arcTo(t+s,e,t+s,e+i,o),r.arcTo(t+s,e+i,t,e+i,o),r.arcTo(t,e+i,t,e,o),r.arcTo(t,e,t+s,e,o),r.closePath()}renderScene(t){const e=this.ctx,s=this.ease(t);e.clearRect(0,0,this.cvs.width,this.cvs.height),e.fillStyle="transparent",e.fillRect(0,0,this.cvs.width,this.cvs.height),this.renderCard(s),this.renderBadge(s),this.renderStripe(s),e.beginPath(),e.arc(this.CARD.x+this.CARD.w+6,this.RIBBON.y,4,0,2*Math.PI),e.fillStyle="#ffa000",e.fill()}renderCard(t){const e=this.ctx,s=this.CARD;e.save(),this.roundRectPath(s.x,s.y,s.w,s.h,s.r),e.fillStyle="rgba(16,24,32,.88)",e.fill(),e.strokeStyle="rgba(255,255,255,0.06)",e.stroke(),e.clip(),this.renderTable(t),e.restore()}renderTable(t){const s=this.ctx,i=this.CARD,a=this.HEADER_H,o=this.ROW_H,r=this.lerp(0,3*-o,t);let n=i.y+a+r;s.font="12px Inter, system-ui, -apple-system, Segoe UI, Roboto",e.forEach((t,e)=>{s.fillStyle=e%2?"rgba(255,255,255,0.02)":"rgba(255,255,255,0.05)",s.fillRect(i.x,n,i.w,o),s.fillStyle="rgba(255,255,255,.06)",s.fillRect(i.x,n+o-1,i.w,1),s.fillStyle="rgba(233,237,241,.85)",s.fillText(t.day,i.x+10,n+o/2),s.fillText(t.sales,i.x+176,n+o/2),s.fillText(t.spend,i.x+104,n+o/2),s.textAlign="right",s.fillStyle=this.roiColor(t.roi),s.fillText(t.roi+"%",i.x+i.w-10,n+o/2),s.textAlign="left",s.fillStyle="rgba(16,24,32,1",s.fillRect(i.x,i.y,i.w,a);const r=i.y+10,l=i.y+a-10;this.icons.shopify&&s.drawImage(this.icons.shopify,i.x+105,r,18,18),this.icons.ads&&s.drawImage(this.icons.ads,i.x+178,r,18,18),s.font="600 12px Inter, system-ui, -apple-system, Segoe UI, Roboto",s.textBaseline="middle",s.fillStyle="rgba(154,163,173,.75)",s.fillText("Sales",i.x+100,l),s.fillText("Spend",i.x+170,l),s.fillStyle="rgba(233,237,241,.92)",s.fillText("ROI",i.x+i.w-32,l),n+=o});const l=s.createLinearGradient(i.x,i.y,i.x,i.y+i.h);l.addColorStop(0,`rgba(255,0,0,${.1*t})`),l.addColorStop(1,`rgba(0,200,0,${.16*t})`),s.fillStyle=l,s.fillRect(i.x,i.y,i.w,i.h)}renderBadge(t){const e=this.ctx,s=this.lerp(this.RIBBON.startX,this.RIBBON.endX,t),i=this.RIBBON.y;this.roundTopRectPath(s,i-22,this.badgeWidth(e),22,6),e.fillStyle="#ffb300",e.fill(),e.font="12px Inter, system-ui, -apple-system, Segoe UI, Roboto",e.textBaseline="middle",e.fillStyle="#1b1b1b",e.fillText(this.RIBBON.label,s+10,i-10)}renderStripe(t){const e=this.ctx,s=this.lerp(this.RIBBON.startX,this.RIBBON.endX,t),i=this.RIBBON.y;e.beginPath(),e.moveTo(this.CARD.x,i+1),e.lineTo(this.CARD.x+this.CARD.w+6,i+1),e.lineWidth=2,e.strokeStyle="#ffa000",e.stroke();const a=s+this.badgeWidth(e);e.beginPath(),e.moveTo(a-58,i+1),e.lineTo(this.CARD.x-0,i+1),e.lineWidth=2,e.strokeStyle="#ffa000",e.stroke()}badgeWidth(t){t.save(),t.font="12px Inter, system-ui, -apple-system, Segoe UI, Roboto";const e=Math.ceil(t.measureText(this.RIBBON.label).width)+20;return t.restore(),e}toB(){this._play(1)}toA(){this._play(-1)}_play(t){this.dir=t,this.t0=this.t,this.tStart=performance.now(),cancelAnimationFrame(this.raf);const e=s=>{const i=Math.min(1,(s-this.tStart)/this.DURATION);this.t=1===t?Math.min(1,this.t0+i):Math.max(0,this.t0-i),this.renderScene(this.t),(1===t&&this.t<1||-1===t&&this.t>0)&&(this.raf=requestAnimationFrame(e))};this.raf=requestAnimationFrame(e)}}("#roi-canvas")})();